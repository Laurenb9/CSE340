<%- include('../partials/header') %>

<main>
  <h1>Add Classification</h1>

  <!-- Mensajes Flash -->
  <% if (successMessages && successMessages.length > 0) { %>
    <div class="success">
      <% successMessages.forEach(msg => { %>
        <p><%= msg %></p>
      <% }) %>
    </div>
  <% } %>

  <% if (errorMessages && errorMessages.length > 0) { %>
    <div class="error">
      <% errorMessages.forEach(msg => { %>
        <p><%= msg %></p>
      <% }) %>
    </div>
  <% } %>

  <!-- Errores de validaciÃ³n del servidor -->
  <% if (errors && errors.length > 0) { %>
    <div class="error">
      <% errors.forEach(err => { %>
        <p><%= err.msg %></p>
      <% }) %>
    </div>
  <% } %>

  <form action="/inv/add-classification" method="POST" id="add-classification-form">
    <label for="classification_name">Classification Name</label>
    <input 
      type="text" 
      id="classification_name" 
      name="classification_name" 
      pattern="^[A-Za-z0-9]+$"
      required
      title="No spaces or special characters allowed."
    >

    <p class="note">* Classification names cannot contain spaces or special characters.</p>

    <button type="submit">Add Classification</button>
  </form>
</main>

<script>
  // Client-side validation extra (opcional pero recomendado)
  document.getElementById("add-classification-form")
    .addEventListener("submit", function(e) {
      const value = document.getElementById("classification_name").value;
      const regex = /^[A-Za-z0-9]+$/;

      if (!regex.test(value)) {
        e.preventDefault();
        alert("Classification name cannot contain spaces or special characters.");
      }
    });
</script>

<%- include('../partials/footer') %>
